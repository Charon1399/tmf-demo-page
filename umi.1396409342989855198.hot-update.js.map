{"version":3,"sources":["umi.1396409342989855198.hot-update.js","src/app.tsx"],"sourcesContent":["globalThis.makoModuleHotUpdate(\r\n  'src/.umi/umi.ts?hmr',\r\n  {\r\n    modules: {},\r\n  },\r\n  function (runtime) {\r\n    runtime._h='3983536416333373877';\nruntime.updateEnsure2Map({\"node_modules/react-dom/client.js\":[\"node_modules/react-dom/client.js\"],\"src/.umi/core/EmptyRoute.tsx\":[\"src/.umi/core/EmptyRoute.tsx\"],\"src/.umi/plugin-layout/Layout.tsx\":[\"vendors_5\",\"vendors_2\",\"vendors_3\",\"vendors_4\",\"src/.umi/plugin-layout/Layout.tsx\"],\"src/.umi/plugin-openapi/openapi.tsx\":[\"vendors_5\",\"vendors_0\",\"src/.umi/plugin-openapi/openapi.tsx\"],\"src/pages/404.tsx\":[\"p__404\"],\"src/pages/Admin/Fault/index.js\":[\"vendors_0\",\"vendors_1\",\"vendors_2\",\"vendors_3\",\"p__Admin__Fault__index\"],\"src/pages/Admin/hvac/index.js\":[\"vendors_0\",\"vendors_1\",\"vendors_2\",\"vendors_3\",\"p__Admin__hvac__index\"],\"src/pages/Admin/index.tsx\":[\"vendors_0\",\"vendors_1\",\"vendors_2\",\"vendors_3\",\"p__Admin__index\"],\"src/pages/User/Chat/index.tsx\":[\"p__User__Chat__index\"]});;\r\n  },\r\n);\r\n","import { UserSwitchOutlined } from '@ant-design/icons';\r\nimport type { Settings as LayoutSettings } from '@ant-design/pro-components';\r\nimport type { RunTimeLayoutConfig } from '@umijs/max';\r\nimport { history } from '@umijs/max';\r\nimport React from 'react';\r\nimport defaultSettings from '../config/defaultSettings';\r\nimport { errorConfig } from './requestErrorConfig';\r\nimport { SYSTEM_PRIMARY_COLORS } from './global';\r\nimport { AgentChatProvider } from './contexts/AgentChatContext';\r\nimport { Button, Select } from 'antd';\r\nimport { RESOURCE_AGENT_STATUS_STORAGE_KEY, RESOURCE_AGENT_STATUS_TIMESTAMP_STORAGE_KEY, ResourceAgentStatus, Scenario, SCENARIO_STORAGE_KEY, TIMESTAMPS_STORAGE_KEY, USER_CHAT_STORAGE_KEY } from './contexts/constants';\r\n\r\nconst isDev = process.env.NODE_ENV === 'development';\r\n\r\n/**\r\n * @see  https://umijs.org/zh-CN/plugins/plugin-initial-state\r\n * */\r\nexport async function getInitialState(): Promise<{\r\n  settings?: Partial<LayoutSettings>;\r\n  loading?: boolean;\r\n  currentSystem?: 'user' | 'admin';\r\n}> {\r\n\r\n\r\n  // 根据当前路径决定系统类型\r\n  const pathname = window.location.pathname;\r\n  const isAdminPath = pathname.includes('admin');\r\n  const currentSystem = isAdminPath ? 'admin' : 'user';\r\n  const settings = {...defaultSettings} as Partial<LayoutSettings>\r\n  settings.title = currentSystem === 'user' ? 'User System' : 'Admin System';\r\n  settings.colorPrimary = currentSystem === 'user' ? SYSTEM_PRIMARY_COLORS.user : SYSTEM_PRIMARY_COLORS.admin;\r\n\r\n  return {\r\n    settings,\r\n    currentSystem,\r\n  };\r\n}\r\n\r\n// ProLayout 支持的api https://procomponents.ant.design/components/layout\r\nexport const layout: RunTimeLayoutConfig = ({ initialState, setInitialState }) => {\r\n  return {\r\n    actionsRender: () => [\r\n      <Button style={{ marginRight: '16px' }} onClick={() => {\r\n        localStorage.setItem(USER_CHAT_STORAGE_KEY, JSON.stringify([]));\r\n        localStorage.setItem(SCENARIO_STORAGE_KEY, '0');\r\n        localStorage.setItem(TIMESTAMPS_STORAGE_KEY, JSON.stringify(Array.from(new Map().entries())));\r\n        localStorage.setItem(RESOURCE_AGENT_STATUS_STORAGE_KEY, ResourceAgentStatus.init.toString());\r\n        let statusTimestamps = new Map();\r\n        statusTimestamps.set(ResourceAgentStatus.init.toString(), new Date().toLocaleString());\r\n        localStorage.setItem(RESOURCE_AGENT_STATUS_TIMESTAMP_STORAGE_KEY, JSON.stringify(Array.from(statusTimestamps.entries())));\r\n        window.location.reload();\r\n      }}>\r\n        reset\r\n      </Button>,\r\n      // <Select title='测试切换场景' style={{ minWidth: '160px' }} onChange={(value: string) => {\r\n      //   localStorage.setItem(SCENARIO_STORAGE_KEY, value);\r\n      //   window.location.reload();\r\n      // }}>\r\n      //   {Object.values(Scenario).filter(value => typeof(value) === 'string').map(\r\n      //     (value: string, index: number) => (\r\n      //       <Select.Option key={index} value={index}>{value}</Select.Option>\r\n      //     )\r\n      //   )}\r\n      // </Select>\r\n    ],\r\n    bgLayoutImgList: [\r\n      {\r\n        src: 'https://mdn.alipayobjects.com/yuyan_qk0oxh/afts/img/D2LWSqNny4sAAAAAAAAAAAAAFl94AQBr',\r\n        left: 85,\r\n        bottom: 100,\r\n        height: '303px',\r\n      },\r\n      {\r\n        src: 'https://mdn.alipayobjects.com/yuyan_qk0oxh/afts/img/C2TWRpJpiC0AAAAAAAAAAAAAFl94AQBr',\r\n        bottom: -68,\r\n        right: -45,\r\n        height: '303px',\r\n      },\r\n      {\r\n        src: 'https://mdn.alipayobjects.com/yuyan_qk0oxh/afts/img/F6vSTbj8KpYAAAAAAAAAAAAAFl94AQBr',\r\n        bottom: 0,\r\n        left: 0,\r\n        width: '331px',\r\n      },\r\n    ],\r\n    // links: isDev\r\n    //   ? [\r\n    //       <Link key=\"openapi\" to=\"/umi/plugin/openapi\" target=\"_blank\">\r\n    //         <LinkOutlined />\r\n    //         <span>OpenAPI 文档</span>\r\n    //       </Link>,\r\n    //     ]\r\n    //   : [],\r\n    menuHeaderRender: undefined,\r\n    childrenRender: (children) => {\r\n      return (\r\n        <AgentChatProvider>\r\n          {children}\r\n        </AgentChatProvider>\r\n      );\r\n    },\r\n    ...initialState?.settings,\r\n    // 覆盖settings中的默认配置\r\n    logo: (\r\n      <div\r\n        style={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          cursor: 'pointer',\r\n          padding: '0 8px',\r\n        }}\r\n      >\r\n        <UserSwitchOutlined style={{ fontSize: '24px', color: initialState?.settings?.colorPrimary }} />\r\n      </div>\r\n    ),\r\n    onMenuHeaderClick: () => {\r\n      const newSystem = initialState?.currentSystem === 'user' ? 'admin' : 'user';\r\n      const newSettings = {...defaultSettings}\r\n      newSettings.title = newSystem === 'user' ? 'User System' : 'Admin System';\r\n      newSettings.colorPrimary = newSystem === 'user' ? SYSTEM_PRIMARY_COLORS.user : SYSTEM_PRIMARY_COLORS.admin;\r\n\r\n      setInitialState((preInitialState) => ({\r\n        ...preInitialState,\r\n        currentSystem: newSystem,\r\n        settings: newSettings as Partial<LayoutSettings>,\r\n      }));\r\n      history.push(newSystem === 'user' ? '/user/chat' : '/admin');\r\n    },\r\n  };\r\n};\r\n\r\n/**\r\n * @name request 配置，可以配置错误处理\r\n * 它基于 axios 和 ahooks 的 useRequest 提供了一套统一的网络请求和错误处理方案。\r\n * @doc https://umijs.org/docs/max/request#配置\r\n */\r\nexport const request = {\r\n  ...errorConfig,\r\n};\r\n"],"names":[],"mappings":"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"}